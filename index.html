<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>í…ŒìŠ¤íŠ¸ë¦­ â€” ë‚˜ë¥¼ ì•Œì•„ê°€ëŠ” ê°€ì¥ ì¬ë¯¸ìˆëŠ” ë°©ë²•</title>
<meta name="description" content="ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, MBTI, ì „ìƒ, ì—°ì• ê¶í•©ê¹Œì§€. ë‚˜ë¥¼ ì•Œì•„ê°€ëŠ” ê°€ì¥ ì¬ë¯¸ìˆëŠ” ë°©ë²•, í…ŒìŠ¤íŠ¸ë¦­!">
<meta name="keywords" content="ì‹¬ë¦¬í…ŒìŠ¤íŠ¸,MBTI,ì „ìƒí…ŒìŠ¤íŠ¸,ì—°ì• í…ŒìŠ¤íŠ¸,ê¶í•©í…ŒìŠ¤íŠ¸,ì„±ê²©ìœ í˜•,ë¬´ë£Œì‹¬ë¦¬í…ŒìŠ¤íŠ¸">

<!-- Open Graph (ì¹´ì¹´ì˜¤/SNS ê³µìœ ìš© í•„ìˆ˜) -->
<meta property="og:type" content="website">
<meta property="og:site_name" content="í…ŒìŠ¤íŠ¸ë¦­">
<meta property="og:title" content="í…ŒìŠ¤íŠ¸ë¦­ â€” ë‚˜ë¥¼ ì•Œì•„ê°€ëŠ” ê°€ì¥ ì¬ë¯¸ìˆëŠ” ë°©ë²•">
<meta property="og:description" content="ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, MBTI, ì „ìƒ, ì—°ì• ê¶í•©ê¹Œì§€. ë‚˜ë¥¼ ì•Œì•„ê°€ëŠ” ê°€ì¥ ì¬ë¯¸ìˆëŠ” ë°©ë²•!">
<meta property="og:image" content="https://testrik.co.kr/og-image.png">
<meta property="og:url" content="https://testrik.co.kr">

<!-- ì¹´ì¹´ì˜¤ SDK â€” ë°˜ë“œì‹œ ì´ ë°©ì‹ìœ¼ë¡œ ë¡œë“œ -->
<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"
  integrity="sha384-TiCUE00h649CAMonG018J2ujOgDKW/kVWlChEuu4jK2vxfAAD0eZxzCKakxg55G4"
  crossorigin="anonymous"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">

<style>
  :root {
    --purple: #7c3aed;
    --purple-light: #8b5cf6;
    --pink: #ec4899;
    --bg: #0f0f1a;
    --card-bg: #1a1a2e;
    --card-border: #2d2d4e;
    --text: #f1f5f9;
    --text-muted: #94a3b8;
    --kakao-yellow: #FEE500;
    --kakao-brown: #3C1E1E;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Noto Sans KR', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* â”€â”€ í—¤ë” â”€â”€ */
  header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(15,15,26,0.95);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--card-border);
    padding: 14px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .logo {
    font-size: 22px;
    font-weight: 900;
    background: linear-gradient(135deg, #a78bfa, #ec4899);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: -0.5px;
  }

  .logo span {
    font-size: 10px;
    -webkit-text-fill-color: var(--text-muted);
    color: var(--text-muted);
    display: block;
    font-weight: 400;
    letter-spacing: 3px;
    margin-top: -2px;
  }

  /* â”€â”€ í™ˆ í™”ë©´ â”€â”€ */
  .page { display: none; }
  .page.active { display: block; }

  .hero {
    padding: 48px 20px 32px;
    text-align: center;
  }

  .hero h1 {
    font-size: clamp(26px, 6vw, 36px);
    font-weight: 900;
    line-height: 1.3;
    margin-bottom: 12px;
    background: linear-gradient(135deg, #e2d9f3, #ec4899 60%, #f59e0b);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero p {
    color: var(--text-muted);
    font-size: 15px;
    line-height: 1.6;
  }

  /* â”€â”€ í…ŒìŠ¤íŠ¸ ì¹´ë“œ ê·¸ë¦¬ë“œ â”€â”€ */
  .test-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 14px;
    padding: 0 16px 40px;
  }

  .test-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 18px;
    padding: 22px 16px;
    cursor: pointer;
    transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s;
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  .test-card::before {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0;
    transition: opacity 0.3s;
    border-radius: 18px;
  }

  .test-card:hover { transform: translateY(-4px); box-shadow: 0 12px 40px rgba(124,58,237,0.25); }
  .test-card:hover::before { opacity: 1; }
  .test-card:active { transform: scale(0.97); }

  .test-card.purple::before { background: linear-gradient(135deg, rgba(124,58,237,0.15), transparent); border: 1px solid #7c3aed; }
  .test-card.pink::before   { background: linear-gradient(135deg, rgba(236,72,153,0.15), transparent); border: 1px solid #ec4899; }
  .test-card.amber::before  { background: linear-gradient(135deg, rgba(245,158,11,0.15), transparent); border: 1px solid #f59e0b; }
  .test-card.teal::before   { background: linear-gradient(135deg, rgba(20,184,166,0.15), transparent); border: 1px solid #14b8a6; }

  .test-card:hover { border-color: transparent; }

  .card-emoji { font-size: 36px; margin-bottom: 10px; display: block; }
  .card-title { font-size: 15px; font-weight: 700; margin-bottom: 6px; }
  .card-desc  { font-size: 12px; color: var(--text-muted); line-height: 1.5; }
  .card-badge {
    display: inline-block;
    margin-top: 10px;
    font-size: 10px;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 20px;
    background: rgba(255,255,255,0.08);
    color: var(--text-muted);
    letter-spacing: 1px;
  }

  /* â”€â”€ í…ŒìŠ¤íŠ¸ í™”ë©´ â”€â”€ */
  .test-container { padding: 20px 16px 40px; max-width: 560px; margin: 0 auto; }

  .progress-wrap { margin-bottom: 28px; }
  .progress-info { display: flex; justify-content: space-between; font-size: 13px; color: var(--text-muted); margin-bottom: 8px; }
  .progress-bar { height: 6px; background: var(--card-border); border-radius: 10px; overflow: hidden; }
  .progress-fill { height: 100%; background: linear-gradient(90deg, var(--purple), var(--pink)); border-radius: 10px; transition: width 0.4s ease; }

  .question-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 20px;
    padding: 28px 22px;
    margin-bottom: 20px;
    animation: fadeUp 0.35s ease;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .question-num {
    font-size: 11px;
    font-weight: 700;
    color: var(--purple-light);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 12px;
  }

  .question-text {
    font-size: 17px;
    font-weight: 700;
    line-height: 1.6;
    margin-bottom: 24px;
  }

  .option-btn {
    width: 100%;
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    padding: 14px 16px;
    color: var(--text);
    font-family: inherit;
    font-size: 14px;
    text-align: left;
    cursor: pointer;
    margin-bottom: 10px;
    transition: all 0.2s;
    line-height: 1.5;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .option-letter {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--card-border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 700;
    flex-shrink: 0;
  }

  .option-btn:hover  { border-color: var(--purple-light); background: rgba(124,58,237,0.12); transform: translateX(4px); }
  .option-btn:active { transform: scale(0.98); }

  .option-btn.selected {
    border-color: var(--purple);
    background: rgba(124,58,237,0.2);
  }

  .option-btn.selected .option-letter {
    background: var(--purple);
    color: #fff;
  }

  /* â”€â”€ ê²°ê³¼ í™”ë©´ â”€â”€ */
  .result-container { padding: 20px 16px 40px; max-width: 560px; margin: 0 auto; animation: fadeUp 0.4s ease; }

  .result-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 24px;
    overflow: hidden;
    margin-bottom: 20px;
  }

  .result-header {
    padding: 32px 24px 24px;
    text-align: center;
    background: linear-gradient(135deg, rgba(124,58,237,0.3), rgba(236,72,153,0.2));
    border-bottom: 1px solid var(--card-border);
  }

  .result-emoji { font-size: 64px; margin-bottom: 16px; display: block; }
  .result-type  { font-size: 13px; font-weight: 700; color: var(--purple-light); letter-spacing: 3px; text-transform: uppercase; margin-bottom: 8px; }
  .result-name  { font-size: clamp(22px, 5vw, 30px); font-weight: 900; margin-bottom: 12px; }
  .result-tag   {
    display: inline-block;
    background: linear-gradient(135deg, var(--purple), var(--pink));
    color: #fff;
    font-size: 12px;
    font-weight: 700;
    padding: 5px 14px;
    border-radius: 20px;
  }

  .result-body { padding: 24px; }

  .result-desc {
    font-size: 15px;
    color: #d1d5db;
    line-height: 1.8;
    margin-bottom: 20px;
  }

  .trait-list { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 24px; }
  .trait {
    background: rgba(124,58,237,0.15);
    border: 1px solid rgba(124,58,237,0.3);
    color: #c4b5fd;
    font-size: 12px;
    font-weight: 600;
    padding: 5px 12px;
    border-radius: 20px;
  }

  .insight-box {
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--card-border);
    border-radius: 14px;
    padding: 16px;
    margin-bottom: 12px;
  }

  .insight-box .insight-label {
    font-size: 11px;
    font-weight: 700;
    color: var(--text-muted);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 8px;
  }

  .insight-box p { font-size: 14px; line-height: 1.7; color: #d1d5db; }

  /* â”€â”€ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ê´‘ê³  ë°•ìŠ¤ â”€â”€ */
  .coupang-box {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    padding: 18px;
    margin-bottom: 20px;
    text-align: center;
  }

  .coupang-label {
    font-size: 10px;
    font-weight: 700;
    color: var(--text-muted);
    letter-spacing: 3px;
    text-transform: uppercase;
    margin-bottom: 12px;
  }

  .coupang-link {
    display: block;
    background: linear-gradient(135deg, #e8373e, #ff6b35);
    color: #fff;
    text-decoration: none;
    padding: 14px 20px;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 700;
    transition: opacity 0.2s, transform 0.2s;
  }

  .coupang-link:hover { opacity: 0.9; transform: translateY(-2px); }
  .coupang-link .coupang-sub { font-size: 11px; font-weight: 400; opacity: 0.85; margin-top: 3px; display: block; }

  /* â”€â”€ ê³µìœ  ì„¹ì…˜ â”€â”€ */
  .share-section { margin-bottom: 20px; }
  .share-title {
    text-align: center;
    font-size: 15px;
    font-weight: 700;
    color: var(--text-muted);
    margin-bottom: 14px;
  }

  .share-btn {
    width: 100%;
    border: none;
    border-radius: 14px;
    padding: 16px 20px;
    font-family: inherit;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-bottom: 10px;
    transition: transform 0.15s, box-shadow 0.15s;
  }

  .share-btn:active { transform: scale(0.97); }

  /* ì¹´ì¹´ì˜¤ ê³µìœ  ë²„íŠ¼ */
  .btn-kakao {
    background: var(--kakao-yellow);
    color: var(--kakao-brown);
  }
  .btn-kakao:hover { box-shadow: 0 6px 20px rgba(254,229,0,0.4); }

  /* ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µìœ  ë²„íŠ¼ */
  .btn-instagram {
    background: linear-gradient(135deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
    color: #fff;
  }
  .btn-instagram:hover { box-shadow: 0 6px 20px rgba(220,39,67,0.4); }

  /* ë§í¬ ë³µì‚¬ ë²„íŠ¼ */
  .btn-copy {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    color: var(--text);
  }
  .btn-copy:hover { border-color: var(--purple-light); }

  /* ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ */
  .btn-retry {
    width: 100%;
    background: transparent;
    border: 1px solid var(--card-border);
    border-radius: 14px;
    padding: 14px;
    color: var(--text-muted);
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    margin-top: 6px;
  }
  .btn-retry:hover { border-color: var(--purple-light); color: var(--text); }

  /* í† ìŠ¤íŠ¸ ì•Œë¦¼ */
  .toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: #1e1e3a;
    border: 1px solid var(--purple);
    color: var(--text);
    padding: 12px 22px;
    border-radius: 30px;
    font-size: 14px;
    font-weight: 600;
    opacity: 0;
    transition: all 0.3s;
    pointer-events: none;
    white-space: nowrap;
    z-index: 999;
  }
  .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

  /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
  .back-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-family: inherit;
    font-size: 14px;
    cursor: pointer;
    padding: 8px 0;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: color 0.2s;
  }
  .back-btn:hover { color: var(--text); }

  /* AdSense ìŠ¬ë¡¯ */
  .ad-slot {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    padding: 16px;
    text-align: center;
    margin-bottom: 16px;
    min-height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    font-size: 12px;
  }

  /* í•˜ë‹¨ ë©´ì±… ê³ ì§€ */
  .disclaimer {
    font-size: 11px;
    color: var(--text-muted);
    text-align: center;
    padding: 0 20px 30px;
    line-height: 1.6;
    opacity: 0.6;
  }
</style>
</head>
<body>

<header>
  <div class="logo">í…ŒìŠ¤íŠ¸ë¦­<span>TESTRIK</span></div>
</header>

<!-- ===== í™ˆ í˜ì´ì§€ ===== -->
<div id="page-home" class="page active">
  <div class="hero">
    <h1>ë‚˜ë¥¼ ì•Œì•„ê°€ëŠ”<br>ê°€ì¥ ì¬ë¯¸ìˆëŠ” ë°©ë²• âœ¨</h1>
    <p>ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, MBTI, ì „ìƒ, ì—°ì• ê¶í•©<br>ë‚˜ë¥¼ ë°œê²¬í•˜ëŠ” ì—¬ì •ì„ ì‹œì‘í•˜ì„¸ìš”</p>
  </div>

  <!-- AdSense ìŠ¬ë¡¯ (ìƒë‹¨) -->
  <div style="padding: 0 16px 16px;">
    <div class="ad-slot">ğŸ“¢ ê´‘ê³  ì˜ì—­ (AdSense ìŠ¹ì¸ í›„ ì½”ë“œ ì‚½ì…)</div>
  </div>

  <div class="test-grid">
    <div class="test-card purple" onclick="startTest('mbti')">
      <span class="card-emoji">ğŸ§ </span>
      <div class="card-title">MBTI ì„±ê²© ìœ í˜•</div>
      <div class="card-desc">16ê°€ì§€ ìœ í˜• ì¤‘ ë‚˜ëŠ” ì–´ë””ì—?</div>
      <div class="card-badge">12ë¬¸í•­</div>
    </div>

    <div class="test-card pink" onclick="startTest('love')">
      <span class="card-emoji">ğŸ’•</span>
      <div class="card-title">ì—°ì•  ìŠ¤íƒ€ì¼</div>
      <div class="card-desc">ë‚´ ì—°ì•  íŒ¨í„´ì„ ì•Œì•„ë´ìš”</div>
      <div class="card-badge">10ë¬¸í•­</div>
    </div>

    <div class="test-card amber" onclick="startTest('past')">
      <span class="card-emoji">ğŸ”®</span>
      <div class="card-title">ì „ìƒ ì§ì—…</div>
      <div class="card-desc">ë‚˜ëŠ” ì „ìƒì— ëˆ„êµ¬ì˜€ì„ê¹Œ?</div>
      <div class="card-badge">8ë¬¸í•­</div>
    </div>

    <div class="test-card teal" onclick="startTest('stress')">
      <span class="card-emoji">ğŸ§˜</span>
      <div class="card-title">ìŠ¤íŠ¸ë ˆìŠ¤ ìœ í˜•</div>
      <div class="card-desc">ë‚´ ìŠ¤íŠ¸ë ˆìŠ¤ ëŒ€ì²˜ ë°©ì‹ì€?</div>
      <div class="card-badge">10ë¬¸í•­</div>
    </div>
  </div>

  <p class="disclaimer">
    ë³¸ í…ŒìŠ¤íŠ¸ëŠ” ì¬ë¯¸ì™€ ìê¸° ì´í•´ë¥¼ ìœ„í•œ ì°¸ê³  ìë£Œì…ë‹ˆë‹¤.<br>ì „ë¬¸ì ì¸ ì‹¬ë¦¬ ì§„ë‹¨ì„ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  </p>
</div>

<!-- ===== í…ŒìŠ¤íŠ¸ ì§„í–‰ í˜ì´ì§€ ===== -->
<div id="page-test" class="page">
  <div class="test-container">
    <button class="back-btn" onclick="goHome()">â† ëª©ë¡ìœ¼ë¡œ</button>
    <div class="progress-wrap">
      <div class="progress-info">
        <span id="progress-label">1 / 12</span>
        <span id="progress-pct">0%</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill" style="width:0%"></div>
      </div>
    </div>
    <div id="question-area"></div>
  </div>
</div>

<!-- ===== ê²°ê³¼ í˜ì´ì§€ ===== -->
<div id="page-result" class="page">
  <div class="result-container">
    <button class="back-btn" onclick="goHome()">â† ì²˜ìŒìœ¼ë¡œ</button>

    <!-- ê²°ê³¼ ì¹´ë“œ -->
    <div class="result-card" id="result-card">
      <div class="result-header">
        <span class="result-emoji" id="result-emoji">âœ¨</span>
        <div class="result-type" id="result-type">ìœ í˜•</div>
        <div class="result-name" id="result-name">ê²°ê³¼ ì´ë¦„</div>
        <div class="result-tag" id="result-tag">#íƒœê·¸</div>
      </div>
      <div class="result-body">
        <p class="result-desc" id="result-desc">ê²°ê³¼ ì„¤ëª…</p>
        <div class="trait-list" id="trait-list"></div>
        <div class="insight-box">
          <div class="insight-label">ğŸ’¡ ì‹¤ì²œ tip</div>
          <p id="insight-text">íŒ ë‚´ìš©</p>
        </div>
      </div>
    </div>

    <!-- ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ê´‘ê³  -->
    <div class="coupang-box">
      <div class="coupang-label">SPONSORED</div>
      <!-- 
        â˜…â˜…â˜… ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ë§í¬ êµì²´ ë°©ë²• â˜…â˜…â˜…
        1. ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ â†’ ë§í¬ ìƒì„± â†’ ì›í•˜ëŠ” ìƒí’ˆ ì„ íƒ
        2. ì•„ë˜ href ë¶€ë¶„ì„ ë³µì‚¬í•œ ë§í¬ë¡œ êµì²´
        3. í…ìŠ¤íŠ¸ë„ ìƒí’ˆì— ë§ê²Œ ìˆ˜ì •
      -->
      <a class="coupang-link" href="https://link.coupang.com/YOUR_LINK_HERE" target="_blank" rel="noopener" id="coupang-link">
        ğŸ“š ë‹¹ì‹ ì˜ ìœ í˜•ì— ë§ëŠ” ì¶”ì²œ ë„ì„œ
        <span class="coupang-sub">ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ë§í¬ Â· í´ë¦­ ì‹œ ìˆ˜ìµ ë°œìƒ</span>
      </a>
    </div>

    <!-- AdSense ìŠ¬ë¡¯ (ê²°ê³¼ í•˜ë‹¨) -->
    <div class="ad-slot" style="margin-bottom:20px;">ğŸ“¢ ê´‘ê³  ì˜ì—­ (AdSense ì½”ë“œ ì‚½ì…)</div>

    <!-- ê³µìœ  ì„¹ì…˜ -->
    <div class="share-section">
      <div class="share-title">ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ê³  ë¹„êµí•´ë³´ì„¸ìš”! ğŸ‰</div>

      <!-- â˜… ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ë²„íŠ¼ â˜… -->
      <button class="share-btn btn-kakao" id="kakao-share-btn" onclick="shareKakao()">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
          <path d="M12 3C7.029 3 3 6.364 3 10.5c0 2.662 1.662 5.006 4.168 6.373L6.24 20.25l4.318-2.88C10.836 17.448 11.412 17.5 12 17.5c4.971 0 9-3.364 9-7.5S16.971 3 12 3z" fill="#3C1E1E"/>
        </svg>
        ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ê³µìœ 
      </button>

      <!-- ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤í† ë¦¬ -->
      <button class="share-btn btn-instagram" onclick="shareInstagram()">
        ğŸ“¸ ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤í† ë¦¬
      </button>

      <!-- ë§í¬ ë³µì‚¬ -->
      <button class="share-btn btn-copy" onclick="copyLink()">
        ğŸ”— ë§í¬ ë³µì‚¬
      </button>

      <!-- ë‹¤ì‹œí•˜ê¸° -->
      <button class="btn-retry" onclick="retryTest()">ğŸ”„ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
    </div>

    <p class="disclaimer">
      ë³¸ í…ŒìŠ¤íŠ¸ëŠ” ì¬ë¯¸ë¥¼ ìœ„í•œ ì°¸ê³  ìë£Œì…ë‹ˆë‹¤.<br>ì „ë¬¸ ì‹¬ë¦¬ ì§„ë‹¨ì„ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </p>
  </div>
</div>

<!-- í† ìŠ¤íŠ¸ ì•Œë¦¼ -->
<div class="toast" id="toast"></div>

<script>
// ================================================================
// â˜…â˜…â˜… ì¹´ì¹´ì˜¤ ì•± í‚¤ ì„¤ì • â˜…â˜…â˜…
// developers.kakao.com â†’ ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜ â†’ JavaScript í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”
// ================================================================
const KAKAO_APP_KEY = 'YOUR_KAKAO_JAVASCRIPT_KEY'; // â† ì—¬ê¸°ì— ì…ë ¥

// â˜…â˜…â˜… ì‚¬ì´íŠ¸ URL â˜…â˜…â˜…
const SITE_URL = 'https://testrik.co.kr';

// ================================================================
// ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™” (ì•ˆì „í•œ ë°©ì‹)
// ================================================================
window.addEventListener('DOMContentLoaded', function() {
  if (typeof Kakao !== 'undefined') {
    if (!Kakao.isInitialized()) {
      Kakao.init(KAKAO_APP_KEY);
    }
    console.log('âœ… Kakao SDK ì´ˆê¸°í™” ì™„ë£Œ:', Kakao.isInitialized());
  } else {
    console.warn('âš ï¸ Kakao SDK ë¡œë“œ ì‹¤íŒ¨ â€” ë„¤íŠ¸ì›Œí¬ í™•ì¸');
  }
});

// ================================================================
// í…ŒìŠ¤íŠ¸ ë°ì´í„°
// ================================================================
const TESTS = {
  mbti: {
    title: 'MBTI ì„±ê²© ìœ í˜•',
    emoji: 'ğŸ§ ',
    questions: [
      { text: 'ì²˜ìŒ ë§Œë‚œ ì‚¬ëŒê³¼ ëŒ€í™”í•  ë•Œ ë‚˜ëŠ”?', options: ['A. ë¨¼ì € ë§ì„ ê±¸ê³  ì—ë„ˆì§€ê°€ ë„˜ì¹œë‹¤', 'B. ìƒëŒ€ë°©ì´ ë¨¼ì € ë§ ê±¸ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤'], key: 'EI' },
      { text: 'ì£¼ë§ ê³„íšì„ ì„¸ìš¸ ë•Œ ë‚˜ëŠ”?', options: ['A. ë¯¸ë¦¬ ê¼¼ê¼¼íˆ ì¼ì •ì„ ì§ ë‹¤', 'B. ê·¸ë•Œê·¸ë•Œ ì¦‰í¥ì ìœ¼ë¡œ ê²°ì •í•œë‹¤'], key: 'JP' },
      { text: 'ì¹œêµ¬ê°€ ê³ ë¯¼ì„ í„¸ì–´ë†“ì„ ë•Œ ë‚˜ëŠ”?', options: ['A. í•´ê²°ì±…ë¶€í„° ì œì‹œí•œë‹¤', 'B. ë¨¼ì € ì¶©ë¶„íˆ ê³µê°í•œë‹¤'], key: 'TF' },
      { text: 'ìƒˆë¡œìš´ ì•„ì´ë””ì–´ê°€ ìƒê¸°ë©´?', options: ['A. ë°”ë¡œ ì‹¤í–‰ì— ì˜®ê¸´ë‹¤', 'B. ë” ë§ì€ ì •ë³´ë¥¼ ëª¨ì€ë‹¤'], key: 'SN' },
      { text: 'ì•½ì† ì‹œê°„ì— ëŒ€í•´ ë‚˜ëŠ”?', options: ['A. ì ˆëŒ€ ëŠ¦ì§€ ì•Šìœ¼ë ¤ í•œë‹¤', 'B. ì–´ëŠ ì •ë„ ìœµí†µì„±ì´ ìˆë‹¤'], key: 'JP' },
      { text: 'ì—ë„ˆì§€ê°€ ì¶©ì „ë˜ëŠ” ë°©ì‹ì€?', options: ['A. ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦¬ë©´ì„œ', 'B. í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°€ì§€ë©´ì„œ'], key: 'EI' },
      { text: 'ì¼ì„ í•  ë•Œ ë‚˜ëŠ”?', options: ['A. ë‹¨ê³„ì  ê³„íšëŒ€ë¡œ ì§„í–‰í•œë‹¤', 'B. ì „ì²´ ê·¸ë¦¼ì„ ë³´ë©° ìœ ì—°í•˜ê²Œ í•œë‹¤'], key: 'SN' },
      { text: 'ê°ˆë“± ìƒí™©ì—ì„œ ë‚˜ëŠ”?', options: ['A. ë…¼ë¦¬ì ìœ¼ë¡œ ë”°ì§„ë‹¤', 'B. ê°ì •ì„ ë¨¼ì € ê³ ë ¤í•œë‹¤'], key: 'TF' },
      { text: 'ì—¬í–‰ ìŠ¤íƒ€ì¼ì€?', options: ['A. ëª¨ë“  ì¼ì •ì„ ë¯¸ë¦¬ ì˜ˆì•½í•œë‹¤', 'B. í˜„ì§€ì—ì„œ ììœ ë¡­ê²Œ ì •í•œë‹¤'], key: 'JP' },
      { text: 'ì •ë³´ë¥¼ ì²˜ë¦¬í•  ë•Œ ë‚˜ëŠ”?', options: ['A. êµ¬ì²´ì ì¸ ì‚¬ì‹¤ê³¼ ë°ì´í„°ë¥¼ ì„ í˜¸', 'B. íŒ¨í„´ê³¼ ê°€ëŠ¥ì„±ì„ ë¨¼ì € ë³¸ë‹¤'], key: 'SN' },
      { text: 'ê²°ì •ì„ ë‚´ë¦´ ë•Œ ë‚˜ëŠ”?', options: ['A. ê°ê´€ì  ë¶„ì„ì„ ì¤‘ì‹œí•œë‹¤', 'B. ì‚¬ëŒë“¤ì˜ ê°ì •ì„ ì¤‘ì‹œí•œë‹¤'], key: 'TF' },
      { text: 'íŒŒí‹°ê°€ ëë‚˜ë©´ ë‚˜ëŠ”?', options: ['A. ë” ìˆê³  ì‹¶ë‹¤', 'B. ì§‘ì— ë¹¨ë¦¬ ê°€ê³  ì‹¶ë‹¤'], key: 'EI' }
    ],
    calculate: function(answers) {
      let E=0,I=0,S=0,N=0,T=0,F=0,J=0,P=0;
      answers.forEach((a, i) => {
        const key = TESTS.mbti.questions[i].key;
        if (key === 'EI') { a===0 ? E++ : I++; }
        if (key === 'SN') { a===0 ? S++ : N++; }
        if (key === 'TF') { a===0 ? T++ : F++; }
        if (key === 'JP') { a===0 ? J++ : P++; }
      });
      return (E>=I?'E':'I') + (S>=N?'S':'N') + (T>=F?'T':'F') + (J>=P?'J':'P');
    },
    results: {
      'ENFJ': { emoji:'ğŸŒŸ', name:'ì„ ë„ìí˜• ENFJ', tag:'#ë”°ëœ»í•œë¦¬ë” #ê³µê°ëŠ¥ë ¥ì', desc:'ì‚¬ëŒë“¤ì˜ ì ì¬ë ¥ì„ ì´ëŒì–´ë‚´ëŠ” íƒ€ê³ ë‚œ ë¦¬ë”ì…ë‹ˆë‹¤. ê°•í•œ ê³µê° ëŠ¥ë ¥ê³¼ ì„¤ë“ë ¥ìœ¼ë¡œ ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ê¸ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹˜ë©°, íƒ€ì¸ì˜ ì„±ì¥ì„ ë„ìš¸ ë•Œ ê°€ì¥ í° ë³´ëŒì„ ëŠë‚ë‹ˆë‹¤. íŒ€ì˜ í™”í•©ì„ ì¤‘ì‹œí•˜ê³  ë¹„ì „ì„ ì œì‹œí•˜ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤.', traits:['ê³µê° ëŠ¥ë ¥â†‘','íƒ€ê³ ë‚œ ë¦¬ë”','ì´ìƒì£¼ì˜ì','ì„¤ë“ë ¥ ìˆëŠ”'], insight:'ë§¤ì¼ í•œ ì‚¬ëŒì—ê²Œ ì§„ì‹¬ìœ¼ë¡œ ê°ì‚¬ë¥¼ í‘œí˜„í•´ë³´ì„¸ìš”.' },
      'INFJ': { emoji:'ğŸ”®', name:'ì˜¹í˜¸ìí˜• INFJ', tag:'#ì‹ ë¹„ë¡œìš´í†µì°° #ì´ìƒì£¼ì˜ì', desc:'ê¹Šì€ í†µì°°ë ¥ê³¼ ê°•í•œ ì‹ ë…ì„ ê°€ì§„ ì´ìƒì£¼ì˜ìì…ë‹ˆë‹¤. ì¸ë¥˜ì˜ ë°œì „ê³¼ íƒ€ì¸ì˜ í–‰ë³µì— ì§„ì‹¬ìœ¼ë¡œ ê´€ì‹¬ì„ ê°€ì§€ë©°, ìì‹ ì˜ ê°€ì¹˜ê´€ì— ë”°ë¼ í–‰ë™í•©ë‹ˆë‹¤. ë“œë¬¸ ì¡°í•©ì¸ ì§ê´€ê³¼ ê°ì„±ì„ ë™ì‹œì— ê°–ì¶˜ ìœ í˜•ì…ë‹ˆë‹¤.', traits:['ê¹Šì€í†µì°°ë ¥','ì´ìƒì£¼ì˜','ê³µê°ëŠ¥ë ¥','ì°½ì˜ì '], insight:'í•˜ë£¨ 10ë¶„ì´ë¼ë„ ë‚˜ë§Œì˜ ì¼ê¸°ë¥¼ ì¨ë³´ì„¸ìš”.' },
      'ENTJ': { emoji:'ğŸ‘‘', name:'í†µì†”ìí˜• ENTJ', tag:'#íƒ€ê³ ë‚œCEO #ì „ëµê°€', desc:'íƒ€ê³ ë‚œ ì§€ë„ìë¡œì„œ ê°•í•œ ì˜ì§€ì™€ ì¹´ë¦¬ìŠ¤ë§ˆë¥¼ ê°€ì§‘ë‹ˆë‹¤. ëª©í‘œë¥¼ í–¥í•´ íš¨ìœ¨ì ìœ¼ë¡œ ì „ì§„í•˜ë©°, í° ê·¸ë¦¼ì„ ê·¸ë¦¬ê³  ì‹¤í–‰í•˜ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì–´ë–¤ ë„ì „ë„ ê¸°íšŒë¡œ ë§Œë“œëŠ” í˜ì´ ìˆìŠµë‹ˆë‹¤.', traits:['ê°•í•œë¦¬ë”ì‹­','ì „ëµì ','ê²°ë‹¨ë ¥','ëª©í‘œì§€í–¥'], insight:'ë§¤ì£¼ í•˜ë‚˜ì˜ ìƒˆë¡œìš´ ì±Œë¦°ì§€ë¥¼ ì„¤ì •í•´ë³´ì„¸ìš”.' },
      'INTP': { emoji:'ğŸ”¬', name:'ë…¼ë¦¬ìˆ ì‚¬í˜• INTP', tag:'#í˜¸ê¸°ì‹¬ì²œì¬ #ë¶„ì„ê°€', desc:'ëì—†ëŠ” í˜¸ê¸°ì‹¬ìœ¼ë¡œ ì„¸ìƒì„ íƒêµ¬í•˜ëŠ” ë…¼ë¦¬ì˜ ë‹¬ì¸ì…ë‹ˆë‹¤. ë³µì¡í•œ ë¬¸ì œë¥¼ ë¶„ì„í•˜ê³  ë…ì°½ì ì¸ í•´ê²°ì±…ì„ ì°¾ì•„ë‚´ë©°, ì§€ì‹ê³¼ ì´í•´ ê·¸ ìì²´ì—ì„œ ì¦ê±°ì›€ì„ ì°¾ìŠµë‹ˆë‹¤. í˜¼ìë§Œì˜ ì‹œê°„ì´ ì°½ì˜ì„±ì„ í­ë°œì‹œí‚µë‹ˆë‹¤.', traits:['ë¶„ì„ì ','ë…ì°½ì ','ë…¼ë¦¬ì ','ì§€ì í˜¸ê¸°ì‹¬'], insight:'ì•„ì´ë””ì–´ ë…¸íŠ¸ë¥¼ ë§Œë“¤ì–´ ë– ì˜¤ë¥´ëŠ” ìƒê°ì„ ê¸°ë¡í•´ë³´ì„¸ìš”.' },
      'ENFP': { emoji:'ğŸ¦‹', name:'í™œë™ê°€í˜• ENFP', tag:'#ì—ë„ˆì§€í­ë°œ #ê¸ì •ë§¨', desc:'ì—´ì •ì ì´ê³  ì°½ì˜ì ì¸ ììœ ë¡œìš´ ì˜í˜¼ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì•„ì´ë””ì–´ì™€ ê°€ëŠ¥ì„±ì— í¥ë¶„í•˜ë©°, ì‚¬ëŒë“¤ì—ê²Œ ì˜ê°ì„ ì£¼ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤. ì‚¶ì„ ëª¨í—˜ìœ¼ë¡œ ë³´ëŠ” ë‚™ê´€ì ì¸ ì‹œê°ì´ ë§¤ë ¥ì…ë‹ˆë‹¤.', traits:['ì°½ì˜ì ','ì—´ì •ì ','ììœ ë¡œìš´','ì˜ê°ì„ì£¼ëŠ”'], insight:'ì¢‹ì•„í•˜ëŠ” ì·¨ë¯¸ í•˜ë‚˜ë¥¼ ê¾¸ì¤€íˆ ë°œì „ì‹œì¼œ ë³´ì„¸ìš”.' },
      'ISTJ': { emoji:'ğŸ›ï¸', name:'ì²­ë ´ê²°ë°±í˜• ISTJ', tag:'#ë¯¿ìŒì§í•œê¸°ë‘¥ #ì„±ì‹¤í•¨', desc:'ê°•í•œ ì±…ì„ê°ê³¼ ì‹ ë¢°ì„±ìœ¼ë¡œ ì£¼ë³€ì˜ ê¸°ë‘¥ì´ ë˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤. ê·œì¹™ê³¼ ì „í†µì„ ì¤‘ì‹œí•˜ë©°, ë§¡ì€ ì¼ì€ ë°˜ë“œì‹œ ì™„ìˆ˜í•©ë‹ˆë‹¤. ì„¸ë¶€ ì‚¬í•­ì— ê°•í•˜ê³  ì²´ê³„ì ì¸ ë°©ì‹ì„ ì„ í˜¸í•©ë‹ˆë‹¤.', traits:['ì±…ì„ê°ê°•í•œ','ì‹ ë¢°í• ìˆ˜ìˆëŠ”','ì²´ê³„ì ','ê¼¼ê¼¼í•œ'], insight:'ìì‹ ì´ í•´ë‚¸ ì¼ë“¤ì„ ê¸°ë¡í•˜ë©° ì„±ì·¨ê°ì„ ì¦ê²¨ë³´ì„¸ìš”.' },
      'DEFAULT': { emoji:'âœ¨', name:'ë…íŠ¹í•œ ë‚˜ë§Œì˜ ìœ í˜•', tag:'#ë‚˜ëŠ”ë‚˜', desc:'ë‹¹ì‹ ì€ ì–´ëŠ í•œ ìœ í˜•ìœ¼ë¡œ ë”± ë–¨ì–´ì§€ì§€ ì•ŠëŠ” ë‹¤ì±„ë¡œìš´ ë§¤ë ¥ì„ ê°€ì§„ ì‚¬ëŒì…ë‹ˆë‹¤. ìƒí™©ì— ë”°ë¼ ë‹¤ì–‘í•œ ëª¨ìŠµì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆëŠ” ìœ ì—°í•¨ì´ ë‹¹ì‹ ì˜ ê°€ì¥ í° ê°•ì ì´ì—ìš”!', traits:['ìœ ì—°í•œ','ë‹¤ì±„ë¡œìš´','ì ì‘ë ¥','ê· í˜•ì¡íŒ'], insight:'ìì‹ ë§Œì˜ ê°•ì  3ê°€ì§€ë¥¼ ì°¾ì•„ ì ì–´ë³´ì„¸ìš”.' }
    },
    getResult: function(code) {
      return TESTS.mbti.results[code] || TESTS.mbti.results['DEFAULT'];
    }
  },

  love: {
    title: 'ì—°ì•  ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸',
    emoji: 'ğŸ’•',
    questions: [
      { text: 'ì—°ì¸ê³¼ ë‹¤íˆ° í›„ ë‚˜ì˜ í–‰ë™ì€?', options: ['A. ë¨¼ì € ì‚¬ê³¼í•˜ê³  í™”í•´ë¥¼ ìš”ì²­í•œë‹¤', 'B. ìƒëŒ€ë°©ì´ ë¨¼ì € ì‚¬ê³¼í•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤'] },
      { text: 'ì—°ì¸ì—ê²Œ ì• ì • í‘œí˜„í•˜ëŠ” ë°©ì‹ì€?', options: ['A. ë§ë¡œ ìì£¼ ì‚¬ë‘í•œë‹¤ê³  í‘œí˜„í•œë‹¤', 'B. í–‰ë™ìœ¼ë¡œ ì±™ê²¨ì£¼ë©° í‘œí˜„í•œë‹¤'] },
      { text: 'ì—°ì¸ì˜ SNSì— ë‹¤ë¥¸ ì´ì„± ëŒ“ê¸€ì´ ë§ë‹¤ë©´?', options: ['A. ì‹ ê²½ ì“°ì´ì§€ë§Œ ì°¸ëŠ”ë‹¤', 'B. ì§ì ‘ ë¬¼ì–´ë³´ê±°ë‚˜ ë‚´ìƒ‰í•œë‹¤'] },
      { text: 'ì—°ì•  ì´ˆê¸° ì—°ë½ ë¹ˆë„ëŠ”?', options: ['A. í•˜ë£¨ ì¢…ì¼ ì—°ë½í•˜ê³  ì‹¶ë‹¤', 'B. ì ë‹¹í•œ ê±°ë¦¬ê°ì„ ìœ ì§€í•œë‹¤'] },
      { text: 'ì—°ì¸ê³¼ì˜ ê¸°ë…ì¼ì— ëŒ€í•´ ë‚˜ëŠ”?', options: ['A. ê¼¼ê¼¼íˆ ì±™ê¸°ê³  ì´ë²¤íŠ¸ë¥¼ ì¤€ë¹„í•œë‹¤', 'B. íŠ¹ë³„íˆ ì±™ê¸°ì§€ ì•Šì•„ë„ ê´œì°®ë‹¤'] },
      { text: 'ì´ìƒí˜•ì˜ ê°€ì¥ ì¤‘ìš”í•œ ì¡°ê±´ì€?', options: ['A. ì„±ê²©ê³¼ ê°€ì¹˜ê´€ì´ ì˜ ë§ëŠ” ì‚¬ëŒ', 'B. ì™¸ëª¨ì™€ ì²«ì¸ìƒì´ ì¢‹ì€ ì‚¬ëŒ'] },
      { text: 'ì—°ì•  ì¤‘ ììœ ë¡œìš´ ì‹œê°„ì´ í•„ìš”í•  ë•Œ?', options: ['A. í˜¼ìë§Œì˜ ì‹œê°„ì„ ì†”ì§í•˜ê²Œ ìš”ì²­í•œë‹¤', 'B. ìƒëŒ€ë°© ëˆˆì¹˜ê°€ ë³´ì—¬ ë§í•˜ê¸° ì–´ë µë‹¤'] },
      { text: 'ë¯¸ë˜ ê³„íšì„ ì„¸ìš¸ ë•Œ ì—°ì¸ê³¼ì˜ ê´€ê³„ëŠ”?', options: ['A. ë‹¹ì—°íˆ í•¨ê»˜ ê³ ë ¤í•œë‹¤', 'B. ì¼ë‹¨ ë‚´ ê³„íšì„ ë¨¼ì € ì„¸ìš´ë‹¤'] },
      { text: 'ì—°ì¸ì´ í˜ë“¤ì–´í•  ë•Œ ë‚˜ëŠ”?', options: ['A. ì˜†ì—ì„œ ë¬´ì¡°ê±´ ë“¤ì–´ì¤€ë‹¤', 'B. í•´ê²°ì±…ì„ ì°¾ì•„ì£¼ë ¤ í•œë‹¤'] },
      { text: 'ì´ìƒì ì¸ ë°ì´íŠ¸ ìŠ¤íƒ€ì¼ì€?', options: ['A. ì†Œì†Œí•œ ì¼ìƒì„ í•¨ê»˜í•˜ëŠ” ë°ì´íŠ¸', 'B. íŠ¹ë³„í•˜ê³  ìƒˆë¡œìš´ ê²½í—˜ì„ ê³µìœ í•˜ëŠ” ë°ì´íŠ¸'] }
    ],
    calculate: function(answers) {
      const aCount = answers.filter(a => a === 0).length;
      if (aCount >= 7) return 'romantic';
      if (aCount >= 4) return 'balanced';
      return 'independent';
    },
    results: {
      romantic: { emoji:'ğŸ’', name:'ì—´ì •í˜• ë¡œë§¨í‹°ìŠ¤íŠ¸', tag:'#ì‚¬ë‘ì´ì „ë¶€ #í’€ì´ëª¨ì…˜', desc:'ì—°ì• ë¥¼ í•  ë•Œ ì˜¨ ë§ˆìŒì„ ë‹¤ ìŸëŠ” ì—´ì •í˜•ì…ë‹ˆë‹¤. ìƒëŒ€ë°©ì„ í–¥í•œ ë§ˆìŒì´ ëœ¨ê²ê³ , ì‘ì€ ê²ƒ í•˜ë‚˜í•˜ë‚˜ì—ë„ ì˜ë¯¸ë¥¼ ë‘ë©° ì†Œì¤‘íˆ ì—¬ê¹ë‹ˆë‹¤. ê°€ë” ë„ˆë¬´ ê°ì •ì— ì¶©ì‹¤í•´ ì§€ì¹˜ëŠ” ê²½ìš°ë„ ìˆì§€ë§Œ, ê·¸ ì§„ì‹¬ì´ ë‹¹ì‹ ì˜ ê°€ì¥ í° ë§¤ë ¥ì´ì—ìš”.', traits:['ì—´ì •ì ','ê°ì„±í’ë¶€','í—Œì‹ ì ','ë¡œë§¨í‹±í•œ'], insight:'ìì‹ ì„ ìœ„í•œ ì‹œê°„ë„ ì¶©ë¶„íˆ ê°€ì ¸ë³´ì„¸ìš”. ì¶©ì „ì´ í•„ìš”í•´ìš”.' },
      balanced: { emoji:'ğŸ’', name:'ê· í˜•í˜• íŒŒíŠ¸ë„ˆ', tag:'#ë°€ë‹¹ì˜ê³ ìˆ˜ #ì ë‹¹í•œê±°ë¦¬', desc:'ê°ì„±ê³¼ ì´ì„±ì´ ê· í˜• ì¡íŒ ì—°ì• ë¥¼ í•©ë‹ˆë‹¤. ìƒëŒ€ë°©ì„ ì•„ë¼ë©´ì„œë„ ìì‹ ì„ ìƒì§€ ì•ŠëŠ” ê±´ê°•í•œ ì—°ì•  ìŠ¤íƒ€ì¼ì„ ì¶”êµ¬í•´ìš”. ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ ê°•ì ì…ë‹ˆë‹¤.', traits:['ê· í˜•ì¡íŒ','ìœ ì—°í•œ','í˜„ì‹¤ì ','ì´ì„±ì '], insight:'ê°ì •ì„ ì†”ì§í•˜ê²Œ í‘œí˜„í•˜ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš”.' },
      independent: { emoji:'ğŸŒ¿', name:'ë…ë¦½í˜• ììœ ì¸', tag:'#ë‚˜ë„ì¤‘ìš”í•´ #ê±´ê°•í•œê±°ë¦¬ê°', desc:'ì‚¬ë‘í•˜ë©´ì„œë„ ìì‹ ì˜ ì‚¶ì„ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ì„±ìˆ™í•œ ì—°ì•  ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤. ì„œë¡œì˜ ê³µê°„ì„ ì¡´ì¤‘í•˜ê³  ê°ìì˜ ì‚¶ì„ ê°–ëŠ” ê²ƒì´ ë” ê±´ê°•í•œ ê´€ê³„ë¼ê³  ìƒê°í•´ìš”. ì˜ì¡´ë³´ë‹¤ëŠ” ìƒí˜¸ ì¡´ì¤‘ì„ ì¶”êµ¬í•©ë‹ˆë‹¤.', traits:['ë…ë¦½ì ','ìê¸°ì¡´ì¤‘','ì„±ìˆ™í•œ','í˜„ì‹¤ì '], insight:'ìƒëŒ€ë°©ì—ê²Œ ë¨¼ì € ë‹¤ê°€ê°€ëŠ” ìš©ê¸°ë¥¼ ë‚´ë³´ì„¸ìš”.' }
    },
    getResult: function(code) { return TESTS.love.results[code]; }
  },

  past: {
    title: 'ì „ìƒ ì§ì—… í…ŒìŠ¤íŠ¸',
    emoji: 'ğŸ”®',
    questions: [
      { text: 'ê°€ì¥ ëŒë¦¬ëŠ” ì‹œëŒ€ ë°°ê²½ì€?', options: ['A. ì¤‘ì„¸ ìœ ëŸ½ì˜ ê¸°ì‚¬ì™€ ì„±', 'B. ê³ ëŒ€ ë™ì–‘ì˜ ê¶ê¶ê³¼ ì‚¬ì›'] },
      { text: 'ì–´ë¦´ ë•Œë¶€í„° ìì—°ìŠ¤ëŸ½ê²Œ ì˜í–ˆë˜ ê²ƒì€?', options: ['A. ê¸€ ì“°ê³  ë§í•˜ëŠ” ê²ƒ', 'B. ì†ìœ¼ë¡œ ë§Œë“¤ê³  ê³ ì¹˜ëŠ” ê²ƒ'] },
      { text: 'ìœ„ê¸° ìƒí™©ì—ì„œ ë‚˜ëŠ”?', options: ['A. ì•ì¥ì„œì„œ í•´ê²°í•œë‹¤', 'B. ì°¨ë¶„íˆ ê³„íšì„ ì„¸ìš´ë‹¤'] },
      { text: 'ì‚¬ëŒë“¤ì´ ë‚˜ì—ê²Œ ìì£¼ í•˜ëŠ” ë§ì€?', options: ['A. "ë„Œ ì§„ì§œ ì„¤ë“ë ¥ ìˆì–´"', 'B. "ë„Œ ì†ì¬ì£¼ê°€ ëŒ€ë‹¨í•´"'] },
      { text: 'ì´ìƒì ì¸ ì‚¶ì˜ ë°©ì‹ì€?', options: ['A. ë§ì€ ì‚¬ëŒë“¤ì—ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì‚¶', 'B. ì¡°ìš©íˆ ë‚˜ë§Œì˜ ì‘í’ˆì„ ë‚¨ê¸°ëŠ” ì‚¶'] },
      { text: 'ë‘ë ¤ì›€ ì—†ì´ í•  ìˆ˜ ìˆë‹¤ë©´?', options: ['A. ì „ ì„¸ê³„ë¥¼ ì—¬í–‰í•˜ë©° ì‚¬ëŒë“¤ì„ ë§Œë‚œë‹¤', 'B. ê¹Šì€ ì‚°ì†ì—ì„œ í˜¼ì ìˆ˜ë ¨í•œë‹¤'] },
      { text: 'ë‚˜ë¥¼ ê°€ì¥ í–‰ë³µí•˜ê²Œ í•˜ëŠ” ê²ƒì€?', options: ['A. ì‚¬ëŒë“¤ì˜ ê°ë™ê³¼ í™˜í˜¸', 'B. ì™„ì„±ëœ ì‘í’ˆì„ ë°”ë¼ë³´ëŠ” ìˆœê°„'] },
      { text: 'ì „ìƒì´ ìˆë‹¤ë©´ ì–´ë–¤ ì—­í• ì´ì—ˆì„ ê²ƒ ê°™ë‚˜ìš”?', options: ['A. ì„¸ìƒì„ ì›€ì§ì´ëŠ” í˜ ìˆëŠ” ì¡´ì¬', 'B. ì§€ì‹ê³¼ ê¸°ìˆ ë¡œ ì„¸ìƒì— ë‚¨ì€ ì¡´ì¬'] }
    ],
    calculate: function(answers) {
      const aCount = answers.filter(a => a === 0).length;
      if (aCount >= 6) return 'warrior';
      if (aCount >= 4) return 'scholar';
      return 'artisan';
    },
    results: {
      warrior: { emoji:'âš”ï¸', name:'ì „ìƒì€ ì „ì‚¬/ì¥êµ°', tag:'#ë¦¬ë”ì˜í”¼ #ì„ ë´‰ì¥', desc:'ë‹¹ì‹ ì˜ ì „ìƒì€ ì „ìŸí„°ë¥¼ ëˆ„ë¹„ë˜ ìš©ë§¹í•œ ì „ì‚¬ í˜¹ì€ êµ°ëŒ€ë¥¼ ì´ë„ëŠ” ì¥êµ°ì´ì—ˆìŠµë‹ˆë‹¤. íƒ€ê³ ë‚œ ë¦¬ë”ì‹­ê³¼ ê°•í•œ ì˜ì§€, ìœ„ê¸° ìƒí™©ì—ì„œ ë” ë¹›ë‚˜ëŠ” ë‹´ë ¥ì´ ê·¸ ì¦ê±°ì…ë‹ˆë‹¤. ì´ë²ˆ ìƒì—ì„œë„ ê·¸ ìš©ê¸°ê°€ ë‚´ë©´ ê¹Šì´ ë‚¨ì•„ìˆì–´ìš”.', traits:['íƒ€ê³ ë‚œë¦¬ë”','ê°•ì¸í•¨','ìš©ë§¹','ê²°ë‹¨ë ¥'], insight:'í˜„ì‹¤ì—ì„œë„ íŒ€ì„ ì´ë„ëŠ” ì—­í• ì„ ë§¡ì•„ë³´ì„¸ìš”. ë‹¹ì‹ ì—ê²Œ ì˜ ë§ìŠµë‹ˆë‹¤.' },
      scholar: { emoji:'ğŸ“œ', name:'ì „ìƒì€ í•™ì/í˜„ì¸', tag:'#ì§€í˜œì˜í™”ì‹  #ì§€ì‹íƒêµ¬ì', desc:'ì „ìƒì˜ ë‹¹ì‹ ì€ ë°©ëŒ€í•œ ì§€ì‹ì„ ìŒ“ê³  ì§„ë¦¬ë¥¼ íƒêµ¬í•˜ë˜ í˜„ì¸ì´ì—ˆìŠµë‹ˆë‹¤. ì´ë²ˆ ìƒì—ì„œë„ ëª¨ë¥´ëŠ” ê²ƒì„ ê·¸ëƒ¥ ë„˜ê¸°ì§€ ëª»í•˜ê³ , ê¹Šì´ íŒŒê³ ë“œëŠ” ì„±ê²©ì´ ë‚¨ì•„ìˆì–´ìš”. ë‹¹ì‹ ì˜ í†µì°°ì€ ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ í° ë„ì›€ì´ ë©ë‹ˆë‹¤.', traits:['ì§€ì í˜¸ê¸°ì‹¬','í†µì°°ë ¥','ë¶„ì„ì ','ê¹Šì€ì‚¬ê³ '], insight:'ë‹¹ì‹ ì´ ì•„ëŠ” ê²ƒì„ ë‚˜ëˆ„ì–´ ì£¼ì„¸ìš”. ì£¼ë³€ì´ ë°ì•„ì§‘ë‹ˆë‹¤.' },
      artisan: { emoji:'ğŸ¨', name:'ì „ìƒì€ ì˜ˆìˆ ê°€/ì¥ì¸', tag:'#ì†ëì—ë§ˆë²• #ì°½ì¡°ì', desc:'ì „ìƒì˜ ë‹¹ì‹ ì€ ì†ëì—ì„œ ì•„ë¦„ë‹¤ì›€ì„ ì°½ì¡°í•˜ë˜ ì˜ˆìˆ ê°€ í˜¹ì€ ì¥ì¸ì´ì—ˆìŠµë‹ˆë‹¤. ë¯¸ì  ê°ê°ê³¼ ì„¸ë¶€ì‚¬í•­ì— ëŒ€í•œ ì§‘ì°©, ì™„ì„±ì— ëŒ€í•œ ì—´ë§ì´ ê·¸ í”ì ì…ë‹ˆë‹¤. ì´ë²ˆ ìƒì—ì„œë„ ì°½ì¡°ì ì¸ ì¼ì—ì„œ ì§„ì •í•œ ê¸°ì¨ì„ ëŠë‚ë‹ˆë‹¤.', traits:['ì°½ì˜ì ','ì™„ë²½ì£¼ì˜','ì‹¬ë¯¸ì•ˆ','ì„¬ì„¸í•¨'], insight:'ì‘ì€ ê²ƒì´ë¼ë„ ì§ì ‘ ë§Œë“¤ì–´ë³´ëŠ” ì·¨ë¯¸ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.' }
    },
    getResult: function(code) { return TESTS.past.results[code]; }
  },

  stress: {
    title: 'ìŠ¤íŠ¸ë ˆìŠ¤ ëŒ€ì²˜ ìœ í˜•',
    emoji: 'ğŸ§˜',
    questions: [
      { text: 'ì—…ë¬´ ë§ˆê°ì´ ì´‰ë°•í•  ë•Œ ë‚˜ëŠ”?', options: ['A. ì§‘ì¤‘ë ¥ì´ ì˜¤íˆë ¤ ì˜¬ë¼ê°€ í•´ë‚¸ë‹¤', 'B. ë¶ˆì•ˆê°ì— ì§‘ì¤‘ì´ ì˜ ì•ˆ ëœë‹¤'] },
      { text: 'ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í’€ ë•Œ ì£¼ë¡œ?', options: ['A. ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦¬ë©° ë°œì‚°í•œë‹¤', 'B. í˜¼ì ì¡°ìš©íˆ ì‰°ë‹¤'] },
      { text: 'ì˜ˆìƒì¹˜ ëª»í•œ ë³€ìˆ˜ê°€ ìƒê²¼ì„ ë•Œ?', options: ['A. ë¹ ë¥´ê²Œ ëŒ€ì•ˆì„ ì°¾ëŠ”ë‹¤', 'B. ë‹¹í™©í•˜ê³  ì‹œê°„ì´ í•„ìš”í•˜ë‹¤'] },
      { text: 'í˜ë“¤ ë•Œ ì£¼ë³€ì—?', options: ['A. ì†”ì§í•˜ê²Œ í„¸ì–´ë†“ëŠ”ë‹¤', 'B. í˜¼ì í•´ê²°í•˜ë ¤ í•œë‹¤'] },
      { text: 'ìŠ¤íŠ¸ë ˆìŠ¤ì˜ ì£¼ëœ ì›ì¸ì€?', options: ['A. ì¸ê°„ê´€ê³„ì™€ ê°ˆë“±', 'B. ì¼ê³¼ ì„±ê³¼ì— ëŒ€í•œ ë¶€ë‹´'] },
      { text: 'í˜ë“  ìƒí™©ì´ ì§€ë‚˜ê°„ í›„?', options: ['A. ê¸ˆë°© íšŒë³µí•˜ê³  í„¸ì–´ë²„ë¦°ë‹¤', 'B. ì˜¤ë˜ ë§ˆìŒì— ë‹´ì•„ë‘ëŠ” í¸ì´ë‹¤'] },
      { text: 'ë‚˜ë¥¼ ê°€ì¥ í˜ë“¤ê²Œ í•˜ëŠ” ê²ƒì€?', options: ['A. íƒ€ì¸ì˜ í‰ê°€ì™€ ì‹œì„ ', 'B. ë‚´ê°€ ì„¸ìš´ ê¸°ì¤€ì— ëª» ë¯¸ì¹˜ëŠ” ê²ƒ'] },
      { text: 'í˜ë“¤ ë•Œ ë¨¹ëŠ” ê²ƒì€?', options: ['A. ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ëŸ¬ ë°”ë¡œ ë‚˜ê°„ë‹¤', 'B. ì…ë§›ì´ ì—†ì–´ì§„ë‹¤'] },
      { text: 'ìˆ˜ë©´ íŒ¨í„´ ìŠ¤íŠ¸ë ˆìŠ¤ ì‹œ?', options: ['A. ê·¸ë˜ë„ ì˜ ì”ë‹¤', 'B. ì ë“¤ê¸° ì–´ë µê±°ë‚˜ ì¼ì° ê¹¬ë‹¤'] },
      { text: 'ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œ ë‚˜ëŠ”?', options: ['A. ëª¸ì´ ë¨¼ì € ë°˜ì‘í•œë‹¤ (ë‘í†µ, í”¼ë¡œ)', 'B. ê°ì •ì´ ë¨¼ì € ìš”ë™ì¹œë‹¤'] }
    ],
    calculate: function(answers) {
      const aCount = answers.filter(a => a === 0).length;
      if (aCount >= 7) return 'resilient';
      if (aCount >= 4) return 'sensitive';
      return 'absorber';
    },
    results: {
      resilient: { emoji:'ğŸ’ª', name:'íšŒë³µíƒ„ë ¥í˜•', tag:'#ê°•ì¸í•œë©˜íƒˆ #ë¹ ë¥¸íšŒë³µ', desc:'ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œë„ ë¹„êµì  ë¹ ë¥´ê²Œ íšŒë³µí•˜ëŠ” ê°•í•œ ë©˜íƒˆì˜ ì†Œìœ ìì…ë‹ˆë‹¤. ìœ„ê¸°ë¥¼ ê¸°íšŒë¡œ ì „í™˜í•˜ëŠ” ëŠ¥ë ¥ì´ ìˆìœ¼ë©°, í° ì••ë°• ì†ì—ì„œë„ ëª©í‘œë¥¼ í–¥í•´ ì „ì§„í•  ìˆ˜ ìˆì–´ìš”. ë‹¤ë§Œ ë‚´ë©´ì˜ ê°ì •ì„ ë„ˆë¬´ ì–µëˆ„ë¥´ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.', traits:['ê°•í•œíšŒë³µë ¥','ì ì‘ì ','ì‹¤ìš©ì ','ëª©í‘œì§€í–¥'], insight:'ì–´ë ¤ì›€ì„ ê·¹ë³µí•œ ê²½í—˜ì„ ì¼ê¸°ë¡œ ê¸°ë¡í•´ ë‘ì„¸ìš”. í° í˜ì´ ë©ë‹ˆë‹¤.' },
      sensitive: { emoji:'ğŸŒŠ', name:'ê°ì„±ë¯¼ê°í˜•', tag:'#ì„¬ì„¸í•œê°ì„± #ê³µê°ëŠ¥ë ¥ì', desc:'ê°ì •ì„ ì˜ˆë¯¼í•˜ê²Œ ëŠë¼ëŠ” ë‹¹ì‹ ì€ ìŠ¤íŠ¸ë ˆìŠ¤ì— ì˜í–¥ì„ ë°›ì§€ë§Œ, ê·¸ë§Œí¼ í’ë¶€í•œ ê³µê°ëŠ¥ë ¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ìì‹ ì˜ ê°ì •ì„ ì†”ì§í•˜ê²Œ í‘œí˜„í•˜ê³ , ì ì ˆí•œ ê°ì • í•´ì†Œë²•ì„ ì°¾ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.', traits:['ê°ì„±ì ','ê³µê°ëŠ¥ë ¥','ì„¬ì„¸í•¨','ê°ì •í’ë¶€'], insight:'ë§¤ì¼ ê°ì‚¬í•œ ê²ƒ 3ê°€ì§€ë¥¼ ì ì–´ë³´ì„¸ìš”. ë§ˆìŒì´ ê°€ë²¼ì›Œì§‘ë‹ˆë‹¤.' },
      absorber: { emoji:'ğŸ•¯ï¸', name:'ë‚´ë©´í¡ìˆ˜í˜•', tag:'#ì†ìœ¼ë¡œì‚­íˆëŠ” #í˜¼ìí•´ê²°ì‚¬', desc:'í˜¼ì ëª¨ë“  ê²ƒì„ ì²˜ë¦¬í•˜ë ¤ëŠ” ê²½í–¥ì´ ìˆì–´ìš”. ê°•í•œ ìë¦½ì‹¬ì´ ì¥ì ì´ì§€ë§Œ, í˜¼ì ê°ë‹¹í•˜ê¸° ì–´ë ¤ìš¸ ë•Œ ì£¼ë³€ì— ë„ì›€ì„ ìš”ì²­í•˜ëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤. ìì‹ ì„ ëŒë³´ëŠ” ì‹œê°„ì´ ë” í•„ìš”í•´ìš”.', traits:['ìë¦½ì ','ë‚´ì„±ì ','ê¼¼ê¼¼í•œ','ì‹ ì¤‘í•œ'], insight:'ì‘ì€ ê²ƒì´ë¼ë„ ì¹œí•œ ì‚¬ëŒì—ê²Œ í„¸ì–´ë†“ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš”.' }
    },
    getResult: function(code) { return TESTS.stress.results[code]; }
  }
};

// ================================================================
// ì•± ìƒíƒœ
// ================================================================
let currentTest = null;
let currentQ = 0;
let answers = [];

// ================================================================
// í˜ì´ì§€ ì „í™˜
// ================================================================
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + id).classList.add('active');
  window.scrollTo(0, 0);
}

function goHome() { showPage('home'); }

// ================================================================
// í…ŒìŠ¤íŠ¸ ì‹œì‘
// ================================================================
function startTest(testId) {
  currentTest = testId;
  currentQ = 0;
  answers = [];
  showPage('test');
  renderQuestion();
}

function renderQuestion() {
  const test = TESTS[currentTest];
  const q = test.questions[currentQ];
  const total = test.questions.length;
  const pct = Math.round((currentQ / total) * 100);

  document.getElementById('progress-label').textContent = (currentQ + 1) + ' / ' + total;
  document.getElementById('progress-pct').textContent = pct + '%';
  document.getElementById('progress-fill').style.width = pct + '%';

  const letters = ['A', 'B', 'C', 'D'];
  const html = `
    <div class="question-card">
      <div class="question-num">Q ${currentQ + 1}</div>
      <div class="question-text">${q.text}</div>
      ${q.options.map((opt, i) => `
        <button class="option-btn" onclick="selectAnswer(${i})">
          <span class="option-letter">${letters[i]}</span>
          <span>${opt.replace(/^[A-D]\.\s*/, '')}</span>
        </button>
      `).join('')}
    </div>
  `;
  document.getElementById('question-area').innerHTML = html;
}

function selectAnswer(idx) {
  const btn = document.querySelectorAll('.option-btn')[idx];
  btn.classList.add('selected');

  setTimeout(() => {
    answers.push(idx);
    currentQ++;
    const test = TESTS[currentTest];
    if (currentQ >= test.questions.length) {
      showResult();
    } else {
      renderQuestion();
    }
  }, 280);
}

// ================================================================
// ê²°ê³¼ í‘œì‹œ
// ================================================================
function showResult() {
  const test = TESTS[currentTest];
  const code = test.calculate(answers);
  const result = test.getResult(code);

  document.getElementById('result-emoji').textContent = result.emoji;
  document.getElementById('result-type').textContent = test.title;
  document.getElementById('result-name').textContent = result.name;
  document.getElementById('result-tag').textContent = result.tag;
  document.getElementById('result-desc').textContent = result.desc;
  document.getElementById('insight-text').textContent = result.insight;

  const traitHtml = result.traits.map(t => `<span class="trait">${t}</span>`).join('');
  document.getElementById('trait-list').innerHTML = traitHtml;

  // URLì— ê²°ê³¼ íŒŒë¼ë¯¸í„° ì¶”ê°€ (ê³µìœ  ì‹œ ê²°ê³¼ ë³´ì¡´)
  const shareUrl = SITE_URL + '?test=' + currentTest + '&result=' + encodeURIComponent(code);

  // ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ë§í¬ â€” í…ŒìŠ¤íŠ¸ë³„ ì¶”ì²œ ìƒí’ˆìœ¼ë¡œ êµì²´í•˜ì„¸ìš”
  const coupangLinks = {
    mbti:   'https://link.coupang.com/YOUR_MBTI_BOOK_LINK',
    love:   'https://link.coupang.com/YOUR_LOVE_BOOK_LINK',
    past:   'https://link.coupang.com/YOUR_PAST_BOOK_LINK',
    stress: 'https://link.coupang.com/YOUR_STRESS_BOOK_LINK'
  };
  document.getElementById('coupang-link').href = coupangLinks[currentTest] || coupangLinks.mbti;

  // ì¹´ì¹´ì˜¤ ê³µìœ  ë²„íŠ¼ì— ë°ì´í„° ì €ì¥
  document.getElementById('kakao-share-btn').dataset.shareUrl = shareUrl;
  document.getElementById('kakao-share-btn').dataset.result = result.name;
  document.getElementById('kakao-share-btn').dataset.desc = result.desc.substring(0, 60) + '...';

  showPage('result');
}

function retryTest() { startTest(currentTest); }

// ================================================================
// â˜…â˜…â˜… ì¹´ì¹´ì˜¤í†¡ ê³µìœ  â€” í•µì‹¬ í•¨ìˆ˜ â˜…â˜…â˜…
// ================================================================
function shareKakao() {
  if (typeof Kakao === 'undefined') {
    showToast('âŒ Kakao SDKë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
    return;
  }

  if (!Kakao.isInitialized()) {
    showToast('âŒ ì¹´ì¹´ì˜¤ ì•± í‚¤ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš” (KAKAO_APP_KEY)');
    return;
  }

  const btn = document.getElementById('kakao-share-btn');
  const shareUrl = btn.dataset.shareUrl || SITE_URL;
  const resultName = btn.dataset.result || 'í…ŒìŠ¤íŠ¸ ê²°ê³¼';
  const resultDesc = btn.dataset.desc || 'ë‚˜ì˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!';

  // â˜… Kakao.Share.sendDefault â€” 2.0 ì´ìƒ SDK ë°©ì‹
  Kakao.Share.sendDefault({
    objectType: 'feed',
    content: {
      title: 'âœ¨ ' + resultName,
      description: resultDesc,
      imageUrl: 'https://testrik.co.kr/og-image.png', // â† ì‹¤ì œ OG ì´ë¯¸ì§€ URLë¡œ ë³€ê²½
      link: {
        mobileWebUrl: shareUrl,
        webUrl: shareUrl
      }
    },
    social: {
      likeCount: 0,
      commentCount: 0,
      sharedCount: 0
    },
    buttons: [
      {
        title: 'ë‚˜ë„ í…ŒìŠ¤íŠ¸í•˜ê¸°',
        link: {
          mobileWebUrl: SITE_URL,
          webUrl: SITE_URL
        }
      },
      {
        title: 'ê²°ê³¼ ë³´ê¸°',
        link: {
          mobileWebUrl: shareUrl,
          webUrl: shareUrl
        }
      }
    ]
  });
}

// ================================================================
// ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µìœ  (ëª¨ë°”ì¼ ì•± ë”¥ë§í¬)
// ================================================================
function shareInstagram() {
  const btn = document.getElementById('kakao-share-btn');
  const resultName = btn.dataset.result || 'í…ŒìŠ¤íŠ¸ ê²°ê³¼';
  const text = encodeURIComponent('âœ¨ ' + resultName + '\n\në‚´ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ê³µìœ í•´ìš”!\nğŸ‘‰ ' + SITE_URL + '\n\n#í…ŒìŠ¤íŠ¸ë¦­ #ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ #testrik');

  // ëª¨ë°”ì¼: Instagram ì•± ìŠ¤í† ë¦¬ ê³µìœ  ì‹œë„
  if (/Android|iPhone|iPad/.test(navigator.userAgent)) {
    // ì•±ìœ¼ë¡œ ë°”ë¡œ ì—´ê¸°
    window.location.href = 'instagram://share?text=' + text;
    // ì•±ì´ ì—†ìœ¼ë©´ ì›¹ìœ¼ë¡œ fallback
    setTimeout(() => {
      window.open('https://www.instagram.com/', '_blank');
    }, 1500);
  } else {
    // PC: ë§í¬ ë³µì‚¬ í›„ ì•ˆë‚´
    copyLink();
    showToast('ğŸ“‹ ë§í¬ ë³µì‚¬ë¨! Instagramì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”');
  }
}

// ================================================================
// ë§í¬ ë³µì‚¬
// ================================================================
function copyLink() {
  const btn = document.getElementById('kakao-share-btn');
  const shareUrl = btn.dataset.shareUrl || SITE_URL;

  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(shareUrl).then(() => {
      showToast('ğŸ”— ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”!');
    });
  } else {
    // fallback
    const el = document.createElement('textarea');
    el.value = shareUrl;
    el.style.cssText = 'position:fixed;opacity:0';
    document.body.appendChild(el);
    el.select();
    document.execCommand('copy');
    document.body.removeChild(el);
    showToast('ğŸ”— ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”!');
  }
}

// ================================================================
// í† ìŠ¤íŠ¸ ì•Œë¦¼
// ================================================================
function showToast(msg, duration = 2500) {
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), duration);
}

// ================================================================
// URL íŒŒë¼ë¯¸í„°ë¡œ ê²°ê³¼ ì§ì ‘ ì ‘ê·¼ (ê³µìœ  ë§í¬ í´ë¦­ ì‹œ)
// ================================================================
window.addEventListener('DOMContentLoaded', function() {
  const params = new URLSearchParams(window.location.search);
  const testParam = params.get('test');
  const resultParam = params.get('result');

  if (testParam && resultParam && TESTS[testParam]) {
    currentTest = testParam;
    const test = TESTS[testParam];
    const result = test.results[resultParam] || test.results['DEFAULT'] || Object.values(test.results)[0];
    if (result) {
      document.getElementById('result-emoji').textContent = result.emoji;
      document.getElementById('result-type').textContent = test.title;
      document.getElementById('result-name').textContent = result.name;
      document.getElementById('result-tag').textContent = result.tag;
      document.getElementById('result-desc').textContent = result.desc;
      document.getElementById('insight-text').textContent = result.insight;
      document.getElementById('trait-list').innerHTML = result.traits.map(t => `<span class="trait">${t}</span>`).join('');

      const shareUrl = SITE_URL + '?test=' + testParam + '&result=' + encodeURIComponent(resultParam);
      const btn = document.getElementById('kakao-share-btn');
      btn.dataset.shareUrl = shareUrl;
      btn.dataset.result = result.name;
      btn.dataset.desc = result.desc.substring(0, 60) + '...';

      showPage('result');
    }
  }
});
</script>


</body>
</html>
